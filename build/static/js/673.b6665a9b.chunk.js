"use strict";(self.webpackChunkdashboard_test=self.webpackChunkdashboard_test||[]).push([[673],{964:function(t,e,r){r.d(e,{Z:function(){return l}});r(791);var i=r(689),s="button_button__zpxkc",n=r(184),o=function(t){var e=t.title,r=t.to,o=(0,i.s0)();return(0,n.jsx)("button",{onClick:function(){return o(r)},className:s,"data-testid":"button-component",children:e})},a="title_title__CL1FB",c=function(t){var e=t.title;return(0,n.jsx)("h1",{className:a,"data-testid":"title-component",children:e})},u="header_header__A7NEZ",l=function(t){var e=t.buttonTitle,r=t.title,i=t.to;return(0,n.jsxs)("header",{className:u,children:[(0,n.jsx)(c,{title:r}),(0,n.jsx)(o,{to:i,title:e})]})}},82:function(t,e,r){r.d(e,{Z:function(){return h}});r(791);var i="listItem_wrapper__TClpf",s="listItem_row1__e8JLx",n="listItem_row2__x91zB",o="listItem_title__dYjlk",a="listItem_button__w83fL",c="listItem_button__isFavorite__TibtD",u="listItem_text__S2pW8",l=r(184),h=function(t){var e=t.item,r=t.toggleFavorite;return(0,l.jsxs)("div",{className:i,children:[(0,l.jsxs)("div",{className:s,children:[(0,l.jsx)("h5",{className:o,children:e.id}),r&&(0,l.jsx)("button",{onClick:function(){return r(e.id)},className:"".concat(a," ").concat(e.isFavorite?c:""),children:e.isFavorite?"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0433\u043e":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"})]}),(0,l.jsxs)("div",{className:n,children:[(0,l.jsx)("img",{src:e.thumbnailUrl,alt:e.title}),(0,l.jsx)("p",{className:u,children:e.title})," "]})]})}},673:function(t,e,r){r.r(e),r.d(e,{default:function(){return f}});var i=r(791),s=r(257),n=r(691),o=r(82),a="list_list__UTbzE",c="list_text__9omBh",u=r(184),l=function(t){var e=t.listItems,r=t.isLoading,i=t.isError,s=t.toggleFavorite,n=t.forwardedRef;return(0,u.jsxs)("div",{className:a,ref:n,"data-testid":"list-container",children:[Object.values(e).map((function(t){return(0,u.jsx)(o.Z,{item:t,toggleFavorite:s},t.id)})),r&&(0,u.jsx)("p",{className:c,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}),i&&(0,u.jsx)("p",{className:c,children:"\u0423\u043f\u0441! \u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."})]})},h=(0,s.Pi)((function(){var t=(0,n.m)().listStore,e=t.listItems,r=t.isLoading,s=t.isError,o=t.loadListItems,a=t.toggleFavorite,c=t.page,h=(0,i.useRef)(null),d=function(){if(!r&&h.current){var t=h.current;t.scrollTop+t.clientHeight>=t.scrollHeight-10&&c<=5&&o()}};return(0,i.useEffect)((function(){if(h.current)return h.current.addEventListener("scroll",d),function(){var t;null===(t=h.current)||void 0===t||t.removeEventListener("scroll",d)}}),[r,o]),(0,i.useEffect)((function(){c<=5&&o()}),[]),(0,u.jsx)(l,{listItems:e,isLoading:r,isError:s,toggleFavorite:a,forwardedRef:h})})),d=r(964),f=function(){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(d.Z,{title:"\u0421\u043f\u0438\u0441\u043e\u043a \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432",buttonTitle:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434",to:"/"}),(0,u.jsx)(h,{})]})}},691:function(t,e,r){r.d(e,{m:function(){return p}});var i=r(144),s=r(671),n=r(791),o=r(98),a=(0,i.Z)((function t(e){var r=this;(0,s.Z)(this,t),this.rootStore=void 0,this.favoriteItems=[],this.totalFileSize=0,this.calculateTotalFileSize=function(t){r.totalFileSize=0,t.forEach((function(t){return r.totalFileSize+=r.rootStore.listStore.listItems[t].size}))},this.addNewFavoriteItem=function(t){r.favoriteItems.push(t),r.calculateTotalFileSize(r.favoriteItems)},this.removeFavoriteItem=function(t){var e=r.favoriteItems.filter((function(e){return e!==t}));r.favoriteItems=e,r.calculateTotalFileSize(e)},this.updateFavorites=function(t){r.favoriteItems=t},this.rootStore=e,(0,o.ky)(this)})),c=r(165),u=r(683),l=r(861);function h(t,e){return d.apply(this,arguments)}function d(){return d=(0,l.Z)((0,c.Z)().mark((function t(e,r){var i,s,n,o;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://jsonplaceholder.typicode.com/albums/1/photos?_page=".concat(e,"&_limit=").concat(r));case 3:return i=t.sent,t.next=6,i.json();case 6:return s=t.sent,n=function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e){var r,i,s;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,"https://cors-anywhere.herokuapp.com/",t.next=4,fetch("https://cors-anywhere.herokuapp.com/"+e);case 4:return r=t.sent,t.next=7,r.blob();case 7:return i=t.sent,s=i.size/1048576,t.abrupt("return",s);case 12:return t.prev=12,t.t0=t.catch(0),t.abrupt("return",0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}(),o={},t.next=11,Promise.all(s.map(function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e){var r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(e.thumbnailUrl);case 2:r=t.sent,o[e.id]={id:e.id,title:e.title,thumbnailUrl:e.thumbnailUrl,isFavorite:!1,size:r};case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 11:return t.abrupt("return",o);case 14:throw t.prev=14,t.t0=t.catch(0),t.t0;case 17:case"end":return t.stop()}}),t,null,[[0,14]])}))),d.apply(this,arguments)}var f=function(){function t(e){var r=this;(0,s.Z)(this,t),this.rootStore=void 0,this.listItems={},this.isLoading=!1,this.isError=!1,this.page=1,this.limit=20,this.loadListItems=(0,l.Z)((0,c.Z)().mark((function t(){var e;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!r.isLoading){t.next=3;break}return t.abrupt("return");case 3:return r.setIsLoading(!0),t.next=6,h(r.page,r.limit);case 6:e=t.sent,r.updateListItems((0,u.Z)((0,u.Z)({},r.listItems),e)),r.setPage(r.page+1),r.setIsLoading(!1),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),r.setIsError(!0),r.setIsLoading(!1);case 16:case"end":return t.stop()}}),t,null,[[0,12]])}))),this.toggleFavorite=function(t){var e=(0,u.Z)({},r.listItems);e[t]=(0,u.Z)((0,u.Z)({},r.listItems[t]),{},{isFavorite:!r.listItems[t].isFavorite}),r.updateListItems(e),e[t].isFavorite?r.rootStore.dashboardStore.addNewFavoriteItem(t):r.rootStore.dashboardStore.removeFavoriteItem(t)},this.rootStore=e,(0,o.ky)(this)}return(0,i.Z)(t,[{key:"updateListItems",value:function(t){this.listItems=t}},{key:"setIsLoading",value:function(t){this.isLoading=t}},{key:"setIsError",value:function(t){this.isError=t}},{key:"setPage",value:function(t){this.page=t}}]),t}(),v=(0,i.Z)((function t(){(0,s.Z)(this,t),this.dashboardStore=void 0,this.listStore=void 0,this.dashboardStore=new a(this),this.listStore=new f(this)})),m=(0,n.createContext)(new v),p=function(){return(0,n.useContext)(m)}}}]);
//# sourceMappingURL=673.b6665a9b.chunk.js.map