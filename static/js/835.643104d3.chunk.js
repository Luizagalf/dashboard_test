"use strict";(self.webpackChunkdashboard_test=self.webpackChunkdashboard_test||[]).push([[835],{964:function(t,e,r){r.d(e,{Z:function(){return l}});r(791);var i=r(689),n="button_button__zpxkc",s=r(184),a=function(t){var e=t.title,r=t.to,a=(0,i.s0)();return(0,s.jsx)("button",{onClick:function(){return a(r)},className:n,"data-testid":"button-component",children:e})},o="title_title__CL1FB",c=function(t){var e=t.title;return(0,s.jsx)("h1",{className:o,"data-testid":"title-component",children:e})},u="header_header__A7NEZ",l=function(t){var e=t.buttonTitle,r=t.title,i=t.to;return(0,s.jsxs)("header",{className:u,children:[(0,s.jsx)(c,{title:r}),(0,s.jsx)(a,{to:i,title:e})]})}},82:function(t,e,r){r.d(e,{Z:function(){return d}});r(791);var i="listItem_wrapper__TClpf",n="listItem_row1__e8JLx",s="listItem_row2__x91zB",a="listItem_title__dYjlk",o="listItem_button__w83fL",c="listItem_button__isFavorite__TibtD",u="listItem_text__S2pW8",l=r(184),d=function(t){var e=t.item,r=t.toggleFavorite;return(0,l.jsxs)("div",{className:i,children:[(0,l.jsxs)("div",{className:n,children:[(0,l.jsx)("h5",{className:a,children:e.id}),r&&(0,l.jsx)("button",{onClick:function(){return r(e.id)},className:"".concat(o," ").concat(e.isFavorite?c:""),children:e.isFavorite?"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0433\u043e":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"})]}),(0,l.jsxs)("div",{className:s,children:[(0,l.jsx)("img",{src:e.thumbnailUrl,alt:e.title}),(0,l.jsx)("p",{className:u,children:e.title})," "]})]})}},835:function(t,e,r){r.r(e),r.d(e,{default:function(){return S}});var i=r(791),n=r(257),s=r(691),a=r(964),o="statistics_wrapper__Te6Lp",c="statistics_text__kkPpz",u=r(184),l=function(t){var e=t.favoriteItemsCount,r=t.totalFileSize;return(0,u.jsxs)("div",{className:o,children:[(0,u.jsxs)("p",{className:c,children:["\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u043c: ",e]}),(0,u.jsxs)("p",{className:c,children:["\u0412\u0435\u0441 \u043a\u0430\u0440\u0442\u0438\u043d\u043e\u043a \u0432\u0441\u0435\u0445 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u043c: ",r," MB"]})]})},d=function(t){var e=t.favoriteItemsCount,r=t.totalFileSize;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(a.Z,{title:"Dashboard",buttonTitle:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u0441\u043f\u0438\u0441\u043e\u043a",to:"/list"}),(0,u.jsx)(l,{favoriteItemsCount:e,totalFileSize:r})]})},m=(0,n.Pi)((function(){var t=(0,s.m)().dashboardStore,e=t.favoriteItems,r=t.totalFileSize;return(0,u.jsx)(d,{favoriteItemsCount:e.length,totalFileSize:r})})),h=r(439),f=r(433),v=r(82),p="draggableItem_element__fQMzc",I="draggableItem_dragging__NJ-p3",x=function(t){var e=t.item,r=t.index,n=t.moveItem,s=(0,i.useState)(!1),a=(0,h.Z)(s,2),o=a[0],c=a[1];return(0,u.jsx)("div",{draggable:!0,onDragStart:function(t){t.dataTransfer&&(t.dataTransfer.setData("text/plain",r.toString()),c(!0))},onDragEnd:function(){c(!1)},onDragOver:function(t){t.preventDefault()},onDrop:function(t){t.preventDefault();var e=parseInt(t.dataTransfer.getData("text/plain"));n(e,r)},className:"".concat(p," ").concat(o?I:""),"data-testid":"draggableItem",children:(0,u.jsx)(v.Z,{item:e},e.id)})},_="favoriteItems_list__a8Ilx",g=function(t){var e=t.listItems,r=t.favoriteItems,i=t.moveItem;return(0,u.jsx)(u.Fragment,{children:r.length?(0,u.jsx)("div",{className:_,"data-testid":"favoriteItemsList",children:r.map((function(t,r){return(0,u.jsx)(x,{item:e[t],index:r,moveItem:i},t)}))}):""})},b=(0,n.Pi)((function(){var t=(0,s.m)().dashboardStore,e=t.favoriteItems,r=t.updateFavorites,i=(0,s.m)().listStore.listItems;return(0,u.jsx)(g,{favoriteItems:e,listItems:i,moveItem:function(t,i){var n=(0,f.Z)(e),s=n.splice(t,1),a=(0,h.Z)(s,1)[0];n.splice(i,0,a),r(n)}})})),S=(0,n.Pi)((function(){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(m,{}),(0,u.jsx)(b,{})]})}))},691:function(t,e,r){r.d(e,{m:function(){return p}});var i=r(144),n=r(671),s=r(791),a=r(98),o=(0,i.Z)((function t(e){var r=this;(0,n.Z)(this,t),this.rootStore=void 0,this.favoriteItems=[],this.totalFileSize=0,this.calculateTotalFileSize=function(t){r.totalFileSize=0,t.forEach((function(t){return r.totalFileSize+=r.rootStore.listStore.listItems[t].size}))},this.addNewFavoriteItem=function(t){r.favoriteItems.push(t),r.calculateTotalFileSize(r.favoriteItems)},this.removeFavoriteItem=function(t){var e=r.favoriteItems.filter((function(e){return e!==t}));r.favoriteItems=e,r.calculateTotalFileSize(e)},this.updateFavorites=function(t){r.favoriteItems=t},this.rootStore=e,(0,a.ky)(this)})),c=r(165),u=r(683),l=r(861);function d(t,e){return m.apply(this,arguments)}function m(){return m=(0,l.Z)((0,c.Z)().mark((function t(e,r){var i,n,s,a;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://jsonplaceholder.typicode.com/albums/1/photos?_page=".concat(e,"&_limit=").concat(r));case 3:return i=t.sent,t.next=6,i.json();case 6:return n=t.sent,s=function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e){var r,i,n;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,"https://cors-anywhere.herokuapp.com/",t.next=4,fetch("https://cors-anywhere.herokuapp.com/"+e);case 4:return r=t.sent,t.next=7,r.blob();case 7:return i=t.sent,n=i.size/1048576,t.abrupt("return",n);case 12:return t.prev=12,t.t0=t.catch(0),t.abrupt("return",0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}(),a={},t.next=11,Promise.all(n.map(function(){var t=(0,l.Z)((0,c.Z)().mark((function t(e){var r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s(e.thumbnailUrl);case 2:r=t.sent,a[e.id]={id:e.id,title:e.title,thumbnailUrl:e.thumbnailUrl,isFavorite:!1,size:r};case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 11:return t.abrupt("return",a);case 14:throw t.prev=14,t.t0=t.catch(0),t.t0;case 17:case"end":return t.stop()}}),t,null,[[0,14]])}))),m.apply(this,arguments)}var h=function(){function t(e){var r=this;(0,n.Z)(this,t),this.rootStore=void 0,this.listItems={},this.isLoading=!1,this.isError=!1,this.page=1,this.limit=20,this.loadListItems=(0,l.Z)((0,c.Z)().mark((function t(){var e;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!r.isLoading){t.next=3;break}return t.abrupt("return");case 3:return r.setIsLoading(!0),t.next=6,d(r.page,r.limit);case 6:e=t.sent,r.updateListItems((0,u.Z)((0,u.Z)({},r.listItems),e)),r.setPage(r.page+1),r.setIsLoading(!1),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),r.setIsError(!0),r.setIsLoading(!1);case 16:case"end":return t.stop()}}),t,null,[[0,12]])}))),this.toggleFavorite=function(t){var e=(0,u.Z)({},r.listItems);e[t]=(0,u.Z)((0,u.Z)({},r.listItems[t]),{},{isFavorite:!r.listItems[t].isFavorite}),r.updateListItems(e),e[t].isFavorite?r.rootStore.dashboardStore.addNewFavoriteItem(t):r.rootStore.dashboardStore.removeFavoriteItem(t)},this.rootStore=e,(0,a.ky)(this)}return(0,i.Z)(t,[{key:"updateListItems",value:function(t){this.listItems=t}},{key:"setIsLoading",value:function(t){this.isLoading=t}},{key:"setIsError",value:function(t){this.isError=t}},{key:"setPage",value:function(t){this.page=t}}]),t}(),f=(0,i.Z)((function t(){(0,n.Z)(this,t),this.dashboardStore=void 0,this.listStore=void 0,this.dashboardStore=new o(this),this.listStore=new h(this)})),v=(0,s.createContext)(new f),p=function(){return(0,s.useContext)(v)}}}]);
//# sourceMappingURL=835.643104d3.chunk.js.map